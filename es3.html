<html>
    <head>
        <title>JS TRAINING ES. 3</title>
    </head>
    <body>
        <style>
            table {
            border-collapse:collapse
            }
            td, th {
            border:1px solid #ddd;
            padding:8px;
            }
        </style>
        <h1>ESERCIZIO 3</h1>
        <p>Creazione di una semplice calcolatrice che svolga le funzioni di somma, divisione, sottrazione e moltiplicazione. </p>
        <div>Inserisci il primo numero</div><br>
        <input type="number" id="number1"></input><br><br>
        <div>Inserisci il secondo numero</div><br>
        <input type="number" id="number2"></input><br><br>
        <h3>Cosa vuoi fare?</h3>
        <button id="btn1">+</button>
        <button id="btn2">-</button>
        <button id="btn3">X</button>
        <button id="btn4">:</button><br><br>
        <div id="result"></div>
        <table id="tab" class="center">
            <tr>
              <th>NUMBER 1</th>
              <th>NUMBER 2</th>
              <th>RESULT</th>
            </tr>
        </table>    
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script>
            if($("td").length===0) {
                var arrayLine = JSON.parse(localStorage.getItem("array")||"[]");
                if(arrayLine !== []){
                    console.log(arrayLine);
                    console.log("Stampa elementi");
                    arrayLine.forEach(function(item){
                        console.log(item);
                    });
                    console.log("Popolo tabella");
                    arrayLine.forEach(function(item){
                        $("#tab").append(item);
                    });
                } 
            }
        </script>
        <script>
            $("#btn1").click(function(){
                 calcola("+");
             }); 
            $("#btn2").click(function(){
                 calcola("-");
            }); 
            $("#btn3").click(function(){
                 calcola("X");
            }); 
            $("#btn4").click(function(){
                 calcola(":");
            }); 

            function calcola(segno) {
                var n1 = parseInt($("#number1").val());
                var n2 = parseInt($("#number2").val());
                var risultato;
                switch (segno) {
                case "+":
                    risultato = n1 + n2;
                    break;
                case "-":
                    risultato = n1 - n2;
                    break;
                case ":":
                    risultato = n1 / n2;
                    break;
                case "X":
                    risultato = n1 * n2;
                    break;
                }
             
                $("#result").html(risultato);
                var string = "<tr><td>"+n1+"</td><td>"+n2+"</td><td>"+risultato+"</td></tr>";
                var line= $(string);
                // operations_array.push(string);
                //operations_array = ["tizio", "caio", "sempronio"];
                //operations_array[1];
                //operations_array[3] = "pippo";
                //operations_array.push("pluto"); //inserire elemento in array senza specificare posizione
                //operations_array.pop(2); //leggere l'elemento di un array in una determinata posizione. E' molto poco usato
                var arrayLine = JSON.parse(localStorage.getItem("array") || "[]");
                arrayLine.push(string);
                localStorage.setItem("array", JSON.stringify(arrayLine));
                //var operations_array = localStorage.getItem("array");
                $("#tab").append(line);
            }    
        </script>
    </body>
</html>